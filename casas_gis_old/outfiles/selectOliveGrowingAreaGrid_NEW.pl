#!/usr/bin/perl -w
# Script that removes lines with a certain regex by writing

# Author: Luigi Ponti
# Date: 27 November 2010

use strict;
use Cwd;

my $mainDir = cwd;

# Import weather files for reading.
opendir(DIR, "$mainDir") || die "can't opendir $mainDir: $!";
# Read files.
while (my $file = readdir(DIR))
{
	if ($file =~ /.\.txt/)
	{
        my $outfile = "Med_1023_"."$file";
        open (OUTFILE, ">$outfile") or die "Can't open $outfile for writing: $!";
        open (IN, "<$file") or die "Can't open $file for reading: $!";
        while (<IN>)
        {
            # Go to next line unless it includes some strings.
            # Below a list of strings to prevent "Gibraltar overshooting".
            # 1023 grid cells inside new Olive growing area
            next unless $_ =~ /Model|grid_100_45|grid_100_60|grid_100_63|grid_100_67|grid_100_70|grid_100_71|grid_101_45|grid_101_60|grid_101_62|grid_101_63|grid_101_64|grid_101_66|grid_101_67|grid_101_68|grid_101_69|grid_102_45|grid_102_60|grid_102_61|grid_102_63|grid_102_66|grid_102_68|grid_102_69|grid_102_72|grid_102_73|grid_102_74|grid_103_63|grid_103_65|grid_103_66|grid_103_67|grid_103_75|grid_105_66|grid_107_55|grid_107_76|grid_108_74|grid_109_55|grid_109_62|grid_10_50|grid_10_51|grid_10_52|grid_10_53|grid_10_54|grid_10_55|grid_10_56|grid_110_55|grid_110_66|grid_110_67|grid_110_70|grid_110_71|grid_110_72|grid_110_73|grid_111_69|grid_111_71|grid_111_72|grid_112_55|grid_112_68|grid_112_70|grid_112_71|grid_113_66|grid_113_67|grid_113_68|grid_113_69|grid_113_70|grid_114_62|grid_114_64|grid_114_65|grid_114_66|grid_114_67|grid_114_69|grid_114_70|grid_114_75|grid_115_63|grid_115_64|grid_115_65|grid_115_66|grid_115_67|grid_115_68|grid_115_69|grid_115_70|grid_116_63|grid_116_64|grid_116_65|grid_116_66|grid_116_67|grid_116_68|grid_116_74|grid_117_60|grid_117_63|grid_117_66|grid_117_76|grid_118_63|grid_118_65|grid_118_66|grid_118_75|grid_118_76|grid_119_76|grid_11_50|grid_11_51|grid_11_52|grid_11_53|grid_11_54|grid_11_55|grid_11_56|grid_120_61|grid_120_62|grid_124_41|grid_124_64|grid_124_65|grid_125_41|grid_125_42|grid_126_41|grid_126_42|grid_126_43|grid_127_41|grid_127_42|grid_127_43|grid_128_41|grid_128_42|grid_128_43|grid_129_36|grid_129_37|grid_129_40|grid_129_41|grid_129_42|grid_12_51|grid_12_52|grid_12_53|grid_12_54|grid_12_55|grid_12_56|grid_12_57|grid_12_72|grid_12_75|grid_130_35|grid_130_36|grid_130_37|grid_130_39|grid_130_40|grid_130_41|grid_131_34|grid_131_35|grid_131_36|grid_131_37|grid_131_38|grid_131_39|grid_131_40|grid_131_41|grid_131_42|grid_131_57|grid_132_41|grid_132_42|grid_132_43|grid_132_44|grid_132_59|grid_132_64|grid_133_41|grid_133_42|grid_133_43|grid_133_44|grid_133_58|grid_133_59|grid_133_64|grid_134_41|grid_134_42|grid_134_59|grid_134_60|grid_135_41|grid_137_66|grid_137_67|grid_138_69|grid_139_46|grid_139_68|grid_13_51|grid_13_52|grid_13_53|grid_13_54|grid_13_55|grid_13_56|grid_13_57|grid_13_72|grid_13_73|grid_13_74|grid_13_75|grid_13_76|grid_13_77|grid_13_78|grid_140_46|grid_140_47|grid_140_48|grid_140_49|grid_140_51|grid_140_52|grid_140_62|grid_140_63|grid_140_64|grid_140_65|grid_141_46|grid_141_47|grid_141_48|grid_141_49|grid_141_50|grid_141_51|grid_141_52|grid_141_54|grid_141_56|grid_141_57|grid_141_58|grid_141_60|grid_141_61|grid_141_62|grid_141_63|grid_141_64|grid_141_65|grid_141_66|grid_141_67|grid_141_70|grid_142_47|grid_142_48|grid_142_49|grid_142_50|grid_142_51|grid_142_52|grid_142_53|grid_142_59|grid_142_60|grid_142_61|grid_142_62|grid_142_63|grid_142_64|grid_142_65|grid_142_66|grid_142_67|grid_142_68|grid_143_44|grid_143_45|grid_143_46|grid_143_47|grid_143_48|grid_143_49|grid_143_50|grid_143_52|grid_143_53|grid_143_54|grid_143_55|grid_143_59|grid_143_60|grid_143_61|grid_143_62|grid_143_63|grid_143_64|grid_143_65|grid_143_66|grid_143_67|grid_143_68|grid_143_69|grid_144_46|grid_144_47|grid_144_48|grid_144_49|grid_144_50|grid_144_51|grid_144_52|grid_144_53|grid_144_54|grid_144_55|grid_144_56|grid_144_60|grid_144_61|grid_144_62|grid_144_65|grid_144_66|grid_144_67|grid_144_68|grid_144_69|grid_145_51|grid_145_60|grid_145_61|grid_145_62|grid_145_65|grid_145_66|grid_145_67|grid_145_68|grid_145_69|grid_146_62|grid_146_63|grid_146_65|grid_146_66|grid_146_67|grid_146_68|grid_146_69|grid_14_52|grid_14_53|grid_14_54|grid_14_55|grid_14_56|grid_14_57|grid_14_71|grid_14_72|grid_14_73|grid_14_74|grid_14_75|grid_14_77|grid_14_78|grid_14_79|grid_15_52|grid_15_54|grid_15_55|grid_15_56|grid_15_57|grid_15_58|grid_15_71|grid_15_72|grid_15_73|grid_15_74|grid_15_75|grid_15_76|grid_15_77|grid_15_78|grid_15_79|grid_15_80|grid_15_81|grid_16_56|grid_16_57|grid_16_58|grid_16_59|grid_16_60|grid_16_71|grid_16_72|grid_16_73|grid_16_74|grid_16_75|grid_16_76|grid_16_77|grid_16_78|grid_16_79|grid_16_80|grid_16_81|grid_17_56|grid_17_57|grid_17_58|grid_17_59|grid_17_60|grid_17_61|grid_17_69|grid_17_70|grid_17_72|grid_17_73|grid_17_74|grid_17_75|grid_17_76|grid_17_77|grid_17_78|grid_17_79|grid_17_81|grid_18_56|grid_18_57|grid_18_58|grid_18_59|grid_18_60|grid_18_61|grid_18_62|grid_18_63|grid_18_69|grid_18_71|grid_18_72|grid_18_73|grid_18_74|grid_18_75|grid_18_76|grid_18_77|grid_18_78|grid_18_79|grid_18_81|grid_19_56|grid_19_57|grid_19_58|grid_19_59|grid_19_60|grid_19_61|grid_19_62|grid_19_63|grid_19_66|grid_19_67|grid_19_68|grid_19_69|grid_19_70|grid_19_71|grid_19_72|grid_19_73|grid_19_74|grid_19_75|grid_19_76|grid_19_78|grid_19_79|grid_19_80|grid_19_83|grid_19_84|grid_19_85|grid_20_55|grid_20_56|grid_20_57|grid_20_58|grid_20_59|grid_20_61|grid_20_66|grid_20_67|grid_20_68|grid_20_69|grid_20_70|grid_20_71|grid_20_72|grid_20_73|grid_20_74|grid_20_75|grid_20_76|grid_20_77|grid_20_79|grid_20_82|grid_20_83|grid_20_84|grid_20_85|grid_21_56|grid_21_57|grid_21_58|grid_21_60|grid_21_66|grid_21_67|grid_21_68|grid_21_69|grid_21_70|grid_21_71|grid_21_72|grid_21_73|grid_21_74|grid_21_75|grid_21_76|grid_21_77|grid_21_79|grid_21_82|grid_21_83|grid_21_84|grid_22_57|grid_22_58|grid_22_65|grid_22_66|grid_22_67|grid_22_68|grid_22_69|grid_22_70|grid_22_71|grid_22_72|grid_22_73|grid_22_74|grid_22_75|grid_22_76|grid_22_77|grid_22_78|grid_22_79|grid_22_83|grid_22_84|grid_23_54|grid_23_56|grid_23_59|grid_23_66|grid_23_67|grid_23_68|grid_23_69|grid_23_70|grid_23_71|grid_23_72|grid_23_73|grid_23_74|grid_23_75|grid_23_76|grid_23_77|grid_23_78|grid_24_56|grid_24_58|grid_24_59|grid_24_66|grid_24_67|grid_24_69|grid_24_70|grid_24_71|grid_24_72|grid_24_73|grid_24_74|grid_24_75|grid_24_76|grid_24_77|grid_24_78|grid_25_55|grid_25_57|grid_25_58|grid_25_59|grid_25_65|grid_25_68|grid_25_69|grid_25_70|grid_25_71|grid_25_72|grid_25_73|grid_25_74|grid_25_75|grid_25_76|grid_25_77|grid_25_78|grid_26_58|grid_26_59|grid_26_65|grid_26_67|grid_26_69|grid_26_70|grid_26_71|grid_26_72|grid_26_73|grid_26_74|grid_26_76|grid_26_77|grid_26_78|grid_27_58|grid_27_69|grid_27_70|grid_27_71|grid_27_72|grid_27_73|grid_27_74|grid_27_75|grid_27_76|grid_27_77|grid_27_78|grid_28_57|grid_28_58|grid_28_69|grid_28_70|grid_28_71|grid_28_72|grid_28_74|grid_28_75|grid_28_76|grid_28_77|grid_28_78|grid_28_85|grid_29_57|grid_29_70|grid_29_73|grid_29_76|grid_29_77|grid_29_78|grid_2_47|grid_2_48|grid_2_49|grid_2_50|grid_30_57|grid_30_58|grid_30_65|grid_30_71|grid_30_75|grid_30_76|grid_30_77|grid_30_78|grid_30_79|grid_31_57|grid_31_58|grid_31_67|grid_31_68|grid_31_70|grid_31_74|grid_31_77|grid_31_78|grid_32_57|grid_32_58|grid_32_59|grid_32_69|grid_32_70|grid_32_73|grid_32_74|grid_32_77|grid_33_57|grid_33_58|grid_33_59|grid_33_69|grid_33_70|grid_33_73|grid_33_84|grid_34_56|grid_34_57|grid_34_58|grid_34_59|grid_34_67|grid_34_68|grid_34_70|grid_34_72|grid_34_83|grid_34_84|grid_35_56|grid_35_57|grid_35_58|grid_35_59|grid_35_70|grid_35_71|grid_35_72|grid_35_74|grid_35_80|grid_35_81|grid_35_82|grid_36_58|grid_36_59|grid_36_60|grid_36_70|grid_36_71|grid_36_72|grid_36_84|grid_37_57|grid_37_58|grid_37_59|grid_37_60|grid_37_74|grid_37_75|grid_37_78|grid_37_79|grid_37_80|grid_38_57|grid_38_58|grid_38_59|grid_38_60|grid_38_75|grid_38_77|grid_38_78|grid_38_79|grid_39_58|grid_39_59|grid_39_60|grid_39_61|grid_39_76|grid_39_77|grid_39_78|grid_39_82|grid_3_47|grid_3_50|grid_3_51|grid_3_52|grid_40_59|grid_40_60|grid_40_61|grid_40_77|grid_40_78|grid_40_79|grid_40_81|grid_40_82|grid_41_59|grid_41_60|grid_41_61|grid_41_79|grid_41_80|grid_41_81|grid_41_82|grid_42_59|grid_42_60|grid_42_61|grid_42_81|grid_42_82|grid_43_58|grid_43_59|grid_43_60|grid_43_78|grid_43_79|grid_44_61|grid_44_79|grid_45_59|grid_45_60|grid_45_61|grid_45_72|grid_45_79|grid_46_59|grid_46_60|grid_46_61|grid_46_72|grid_47_59|grid_47_60|grid_47_61|grid_47_81|grid_48_59|grid_48_60|grid_48_61|grid_49_60|grid_49_61|grid_4_47|grid_4_51|grid_4_52|grid_50_59|grid_50_60|grid_52_59|grid_52_60|grid_52_86|grid_52_87|grid_53_59|grid_53_60|grid_53_85|grid_53_86|grid_54_59|grid_54_60|grid_54_85|grid_54_86|grid_54_87|grid_55_58|grid_55_59|grid_55_60|grid_56_58|grid_56_59|grid_56_60|grid_56_84|grid_56_85|grid_57_58|grid_57_59|grid_57_60|grid_57_84|grid_58_58|grid_58_59|grid_58_60|grid_59_56|grid_59_57|grid_59_58|grid_59_59|grid_59_60|grid_5_47|grid_5_50|grid_5_51|grid_5_52|grid_5_53|grid_5_54|grid_60_56|grid_60_57|grid_60_58|grid_60_59|grid_60_60|grid_60_85|grid_61_57|grid_61_58|grid_61_59|grid_61_60|grid_61_68|grid_61_71|grid_61_73|grid_61_74|grid_61_86|grid_62_53|grid_62_55|grid_62_56|grid_62_57|grid_62_58|grid_62_59|grid_62_60|grid_62_68|grid_62_69|grid_62_70|grid_62_71|grid_62_72|grid_62_73|grid_62_74|grid_63_54|grid_63_56|grid_63_57|grid_63_58|grid_63_59|grid_63_60|grid_63_61|grid_63_69|grid_63_70|grid_63_72|grid_63_73|grid_64_49|grid_64_54|grid_64_55|grid_64_56|grid_64_57|grid_64_58|grid_64_59|grid_64_60|grid_64_61|grid_64_69|grid_64_70|grid_64_72|grid_64_87|grid_65_56|grid_65_57|grid_65_58|grid_65_59|grid_65_60|grid_66_58|grid_66_59|grid_66_86|grid_67_55|grid_67_59|grid_67_84|grid_68_81|grid_68_82|grid_68_83|grid_68_84|grid_68_85|grid_68_91|grid_69_80|grid_69_81|grid_69_82|grid_69_83|grid_69_84|grid_69_85|grid_6_47|grid_6_50|grid_6_51|grid_6_52|grid_6_53|grid_6_54|grid_6_55|grid_70_79|grid_70_80|grid_70_81|grid_70_82|grid_70_83|grid_70_84|grid_70_85|grid_70_90|grid_71_44|grid_71_78|grid_71_79|grid_71_80|grid_71_81|grid_71_82|grid_71_83|grid_72_43|grid_72_44|grid_72_63|grid_72_78|grid_72_79|grid_72_80|grid_72_81|grid_72_82|grid_72_83|grid_73_43|grid_73_44|grid_73_62|grid_73_63|grid_73_77|grid_73_78|grid_73_80|grid_73_81|grid_73_82|grid_73_84|grid_74_44|grid_74_62|grid_74_63|grid_74_64|grid_74_75|grid_74_77|grid_74_78|grid_74_84|grid_75_44|grid_75_61|grid_75_62|grid_75_63|grid_75_75|grid_75_76|grid_75_77|grid_76_43|grid_76_44|grid_76_60|grid_76_61|grid_76_62|grid_76_63|grid_76_75|grid_76_76|grid_76_78|grid_76_79|grid_76_80|grid_76_81|grid_76_88|grid_77_43|grid_77_60|grid_77_61|grid_77_63|grid_77_74|grid_77_75|grid_77_76|grid_77_78|grid_77_79|grid_78_43|grid_78_59|grid_78_60|grid_78_61|grid_78_62|grid_78_73|grid_78_75|grid_78_76|grid_78_77|grid_78_78|grid_79_42|grid_79_59|grid_79_60|grid_79_61|grid_79_72|grid_79_73|grid_79_74|grid_79_75|grid_79_76|grid_79_77|grid_7_49|grid_7_50|grid_7_51|grid_7_52|grid_7_53|grid_7_54|grid_7_55|grid_80_63|grid_80_72|grid_80_74|grid_80_75|grid_80_76|grid_80_77|grid_80_85|grid_81_64|grid_81_71|grid_81_72|grid_81_74|grid_81_75|grid_81_76|grid_81_77|grid_81_84|grid_82_63|grid_82_64|grid_82_65|grid_82_68|grid_82_69|grid_82_71|grid_82_72|grid_82_73|grid_82_74|grid_82_75|grid_82_77|grid_82_83|grid_82_84|grid_83_65|grid_83_66|grid_83_67|grid_83_69|grid_83_70|grid_83_71|grid_83_72|grid_83_73|grid_83_74|grid_83_83|grid_84_67|grid_84_68|grid_84_69|grid_84_72|grid_84_73|grid_84_74|grid_85_67|grid_85_73|grid_85_74|grid_85_82|grid_86_72|grid_86_73|grid_86_81|grid_87_72|grid_87_73|grid_88_70|grid_88_71|grid_88_72|grid_8_50|grid_8_51|grid_8_52|grid_8_53|grid_8_54|grid_8_55|grid_8_56|grid_91_72|grid_91_73|grid_91_78|grid_92_70|grid_92_73|grid_92_74|grid_92_75|grid_92_76|grid_93_70|grid_93_72|grid_93_73|grid_93_74|grid_93_75|grid_94_69|grid_95_68|grid_96_42|grid_96_43|grid_96_66|grid_96_67|grid_96_68|grid_97_43|grid_97_44|grid_97_63|grid_97_64|grid_97_66|grid_97_67|grid_98_43|grid_98_44|grid_98_61|grid_98_63|grid_98_64|grid_98_66|grid_98_74|grid_99_44|grid_99_45|grid_99_60|grid_99_61|grid_99_62|grid_99_63|grid_99_65|grid_99_67|grid_99_71|grid_9_50|grid_9_51|grid_9_52|grid_9_53|grid_9_54|grid_9_55|grid_9_56/;
            # Write new file without lines that include regular expressions.
            print OUTFILE "$_";
        }
    close OUTFILE;
    close IN;     
    }
}

closedir DIR;
